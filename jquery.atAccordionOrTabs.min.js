(function(a){a.fn.accordionortabs=function(b){var d=a.extend({defaultOpened:0,tabsIfPossible:true,hashbangPrefix:"tabset_"},b);startingOuterWidth=a(window).width();is_iOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);function e(f,g){f.addClass("at-tabs");tabs_width=0;a("> li > a",f).each(function(h){tabs_width=tabs_width+a(this).outerWidth(true)+5;if(h==a(this).closest(".at-accordion-or-tabs").find("> li > a").length-1){largest_tab_widths[g]=tabs_width+15;c()}})}function c(){if(a(".at-accordion-or-tabs.at-tabs-when-possible").length){a(".bbq.at-accordion-or-tabs.at-tabs-when-possible").each(function(g){tabs_when_possible_index=g;if(largest_tab_widths[g]>a(this).width()){a(this).removeClass("at-tabs");var f=a.bbq.getState(a(this).attr("data-tabset-id"),true)||0;if(f==0){a(this).addClass("at-accordion-closed").find(">li>a").eq(0).removeClass("active").next("section").removeClass("is-open").hide()}}else{if(!a(this).hasClass("at-tabs")){a(this).addClass("at-tabs");if(a(this).hasClass("at-accordion-closed")){a(this).removeClass("at-accordion-closed").find(">li>a").eq(0).addClass("active").next("section").addClass("is-open").show().focus()}e(a(this),tabs_when_possible_index)}}})}}if(d.tabsIfPossible==true){this.addClass("at-tabs-when-possible")}this.find(">li>section").attr("aria-live","assertive");if(d.defaultOpened!=0){this.each(function(f){if(d.defaultOpened<=a(this).find(">li").length){a(this).attr("data-default-opened",d.defaultOpened)}})}this.addClass("bbq clearfix at-accordion-or-tabs").find(">li>a").prepend('<span class="at-tab-one-pixel-fix-left"></span><span class="at-tab-one-pixel-fix-right"></span>');this.each(function(f){a(this).attr("data-tabset-id",d.hashbangPrefix+f);a(this).find(">li>a").each(function(g){a(this).attr("href","!#"+d.hashbangPrefix+f+"="+g);a(this).next("section").prepend('<h1 class="aria-only">'+a(this).text()+"</h1>")})});a(document).ready(function(){a.param.fragment.ajaxCrawlable(true);largest_tab_widths=new Array();a(".bbq.at-accordion-or-tabs.at-tabs-when-possible").each(function(f){e(a(this),f)});a(".bbq.at-accordion-or-tabs").each(function(g){var i=a.bbq.getState(a(this).attr("data-tabset-id"),true)||0;var f=a(this).attr("data-default-opened");if(i==0&&f!==undefined&&f!=""){var h={},j=a(this).attr("data-tabset-id");h[j]=f;a.bbq.pushState(h)}});a(".at-accordion-or-tabs").on("click","li > a",function(h){if(!a(this).hasClass("active")){var g={},i=a(this).closest(".bbq").attr("data-tabset-id"),f=a(this).parent().prevAll().length+1;g[i]=f;a.bbq.pushState(g)}else{if(!a(this).closest(".at-accordion-or-tabs").hasClass("at-tabs")){var i=a(this).closest(".bbq").attr("data-tabset-id");a.bbq.removeState(i)}}a(this).blur();h.preventDefault()});a(window).trigger("hashchange")});a(window).resize(function(){if(!is_iOS||(is_iOS&&(startingOuterWidth!==a(window).width()))){startingOuterWidth=a(window).width();c()}});a(window).on("hashchange",function(f){a(".bbq").each(function(){var g=a.bbq.getState(a(this).attr("data-tabset-id"),true)||0;if(g>0){if(!a(this).find(">li>a").eq(g-1).hasClass("active")){if(a(this).hasClass("at-tabs")){a(this).find(".is-open").removeClass("is-open").hide();a(this).find(">li>section").eq(g-1).toggleClass("is-open").toggle()}else{a(this).find(".is-open").removeClass("is-open").slideToggle();a(this).find(">li>section").eq(g-1).toggleClass("is-open").slideToggle()}a(this).find(".active").removeClass("active");a(this).find(">li>a").eq(g-1).addClass("active").blur()}a(this).removeClass("at-accordion-closed")}else{if(a(this).hasClass("at-accordion-or-tabs")&&(!a(this).hasClass("at-tabs"))){a(this).addClass("at-accordion-closed").find(">li>a.active").removeClass("active").next("section").removeClass("is-open").slideUp()}else{if(a(this).hasClass("at-accordion-or-tabs")&&(a(this).hasClass("at-tabs")&&!a(this).hasClass("at-accordion-closed"))){a(this).addClass("at-accordion-closed").find(">li>a.active").removeClass("active").next("section").removeClass("is-open").hide();a(this).children("li").first().children("a").addClass("active").next("section").addClass("is-open").show()}}}})});return this}}(jQuery));